<% title = ''; %>
<%- include('partials/head') %>

<% if (yearly) { %>
  <h2>Annual Summary</h2>
  <%- include('partials/annualSummaryTable', {
    rows: [
      {
        year: yearly.year,
        totalIncome: yearly.totalIncome,
        totalExpenses: yearly.totalExpenses,
        spending: spendingArr.reduce(function(sum, s) { return sum + s.spending; }, 0),
        netCashFlow: yearly.netCashFlow,
        savingsRate: yearly.savingsRate
      }
    ],
    currency: currency,
    emptyMessage: 'No data available for ' + year
  }) %>
<% } %>

<% if (spendingArr.length) { %>
  <h2>Monthly Spending</h2>
  <canvas id="dashboardChart" width="600" height="200"></canvas>
  <script>
    window.dashboardSpending = <%- JSON.stringify(spendingArr) %>;
  </script>
<% } %>

<%- include('partials/footer') %>